# Agrega si tu proyecto no lo trae aún
scalar JSON

# --- Tipos nuevos ---
type FleetHpStats {
  min: Int
  max: Int
  sum: Int
  count: Int
  avg: Float
}

type FleetStatistics {
  _id: ID!
  totalVehicles: Int!
  vehiclesByType: JSON
  vehiclesByDecade: JSON
  vehiclesBySpeedClass: JSON
  hpStats: FleetHpStats!
  lastUpdated: String
}

# === TU SCHEMA EXISTENTE (deja todo lo que ya tenías) ===

type CommandResponse {
  code: Int
  message: String
}

type ReporterVehicleStats {
  id: ID!
  name: String!
  organizationId: String!
  description: String
  active: Boolean!
  metadata: ReporterVehicleStatsMetadata
}

type ReporterVehicleStatsMetadata {
  createdBy: String
  createdAt: BigInt
  updatedBy: String
  updatedAt: BigInt
}

type ReporterVehicleStatsListing {
  listing: [ReporterVehicleStats]
  queryTotalResultCount: Int
}

input ReporterVehicleStatsFilterInput {
  name: String
  organizationId: String!
  active: Boolean
}

input ReporterVehicleStatsPaginationInput {
  page: Int!
  count: Int!
  queryTotalResultCount: Boolean
}

input ReporterVehicleStatsSortInput {
  field: String!
  asc: Boolean!
}

input ReporterVehicleStatsInput {
  name: String
  organizationId: String!
  description: String
  active: Boolean
}

# *** AQUÍ AGREGA el campo nuevo dentro del MISMO type Query ***
type Query {
  ReporterVehicleStatsListing(
    filterInput: ReporterVehicleStatsFilterInput,
    paginationInput: ReporterVehicleStatsPaginationInput,
    sortInput: ReporterVehicleStatsSortInput
  ): ReporterVehicleStatsListing

  ReporterVehicleStats(id: ID!, organizationId: String!): ReporterVehicleStats

  # --- NUEVO ---
  getFleetStatistics: FleetStatistics!
}

type Mutation {
  ReporterCreateVehicleStats(input: ReporterVehicleStatsInput!): ReporterVehicleStats
  ReporterUpdateVehicleStats(id: ID!, input: ReporterVehicleStatsInput!, merge: Boolean!): ReporterVehicleStats
  ReporterDeleteVehicleStatss(ids: [ID]!): CommandResponse
}

type Subscription {
  ReporterVehicleStatsModified(id: ID!): ReporterVehicleStats

  # opcional, si haces push por websocket
  ReporterFleetStatisticsUpdated: FleetStatistics!
}
